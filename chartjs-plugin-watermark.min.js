var watermarkPlugin={defaultOptions:{x:0,y:0,height:!1,width:!1,alignX:"top",alignY:"left",position:"front",opacity:1},drawWatermark:function(a){var b=a.chart.ctx,c=a.watermark;if(c.image){var d=c.image,e=c.height?c.height:d.height,f=c.width?c.width:d.width,g=c.x,h=c.y,i=b.canvas,j=i.clientWidth||i.width,k=i.clientHeight||i.height;switch(c.alignX){case"right":g=j-g-f;break;case"middle":g=j/2-f/2-g}switch(c.alignY){case"bottom":h=k-h-e;break;case"middle":h=k/2-e/2-h}b.save(),b.globalAlpha=c.opacity,b.drawImage(d,g,h,f,e),b.restore()}},beforeInit:function(a){a.watermark={};var b=a.options;if(b.watermark){var c=Chart.helpers.extend(this.defaultOptions,b.watermark);if(c.image){var d=c.image;if("string"==typeof d){var e=new Image;e.src=d,d=e,c.image=d}d.onload=function(){a.update()}}a.watermark=c}},beforeDraw:function(a){var b=a.watermark;b.image&&"back"==b.position&&this.drawWatermark(a)},afterDraw:function(a){var b=a.watermark;b.image&&"front"==b.position&&this.drawWatermark(a)}};Chart="function"==typeof Chart?Chart:window.Chart,Chart.pluginService.register(watermarkPlugin);