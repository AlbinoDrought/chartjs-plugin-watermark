var watermarkPlugin={drawWatermark:function(a){var b=a.chart.ctx,c=a.watermark;if(c.image){var d=c.image,e=c.height?c.height:d.height,f=c.width?c.width:d.width,g=c.x,h=c.y;switch(c.alignX){case"right":g=b.canvas.width-g-f;break;case"middle":g=b.canvas.width/2-f/2-g}switch(c.alignY){case"bottom":h=b.canvas.height-h-e;break;case"middle":h=b.canvas.height/2-e/2-h}b.save(),b.globalAlpha=c.opacity,b.drawImage(d,g,h,f,e),b.restore()}},beforeInit:function(a){a.watermark={};var b=a.options;if(b.watermark){var c=b.watermark;if(c.image){var d=c.image;if("string"==typeof d){var e=new Image;e.src=d,d=e}a.watermark.image=d,d.onload=function(){a.update()}}a.watermark.x=c.x?c.x:0,a.watermark.y=c.y?c.y:0,a.watermark.height=!!c.height&&c.height,a.watermark.width=!!c.width&&c.width,a.watermark.alignX=c.alignX?c.alignX:"left",a.watermark.alignY=c.alignY?c.alignY:"top",a.watermark.position=c.position?c.position:"front",a.watermark.opacity=c.opacity?c.opacity:1}},beforeDraw:function(a){var b=a.watermark;b.image&&"back"==b.position&&this.drawWatermark(a)},afterDraw:function(a){var b=a.watermark;b.image&&"front"==b.position&&this.drawWatermark(a)}};Chart="function"==typeof Chart?Chart:window.Chart,Chart.pluginService.register(watermarkPlugin);